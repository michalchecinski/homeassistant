
- id: failure_out_home
  alias: Failure - out of home for 14 hours
  trigger:
    - platform: state
      entity_id: input_boolean.michal_home
      to: 'off'
      for:
        hours: 14
        minutes: 0
        seconds: 0
  condition:
    - condition: state
      entity_id: input_boolean.vacation_mode
      state: 'off'
  action:
  - service: script.ifttt_notify
    data_template:
      message: "You haven't been at home for 14 hours is it true?"

- id: failure_guest_mode
  alias: Failure - guest mode for 36 hours
  trigger:
    - platform: state
      entity_id: input_boolean.guest_mode
      to: 'on'
      for:
        hours: 36
        minutes: 0
        seconds: 0
  action:
  - service: script.ifttt_notify
    data_template:
      message: "Do you still have guests?"

- id: failure_at_home
  alias: Failure - at home for 24 hours
  trigger:
    - platform: state
      entity_id: input_boolean.michal_home
      to: 'on'
      for:
        hours: 24
        minutes: 0
        seconds: 0
  action:
  - service: script.ifttt_notify
    data_template:
      message: "You are at home for 24 hours is it true?"

- id: failure_vacuum
  alias: Failure - vacuum not run in 24 hours
  trigger:
    - platform: state
      entity_id: script.vacuum_start
      to: 'off'
      for:
        hours: 24
        minutes: 30
        seconds: 0
  condition:
    - condition: state
      entity_id: input_boolean.vacation_mode
      state: 'off'
  action:
  - service: script.ifttt_notify
    data_template:
      message: "Vacuum haven't run in 24 hours"

- id: failure_vacuum_vacation
  alias: Failure - vacuum not run in 2 days
  trigger:
    - platform: state
      entity_id: script.vacuum_start
      to: 'off'
      for:
        hours: 49
        minutes: 0
        seconds: 0
  condition:
    - condition: state
      entity_id: input_boolean.vacation_mode
      state: 'on'
  action:
  - service: script.ifttt_notify
    data_template:
      message: "Vacuum haven't run in 2 days (vacation mode)"