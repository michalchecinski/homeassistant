##########################
# Phone call automations #
##########################
  
# Stop playback on phonecall
  - id: phone_ring
    alias: Phone - ringing pause music playback
    trigger:
      - platform: state
        entity_id: binary_sensor.phonecall
        to: 'on'
    condition:
      - condition: state
        entity_id: media_player.salon
        state: 'playing'
    action:
      - service: media_player.media_pause
        data:
          entity_id: media_player.salon
      - service: input_boolean.turn_on
        data:
          entity_id: input_boolean.was_playing

# Resume playback after finishing the call
  - id: phone_not_ring
    alias: Phone - resume music after
    trigger:
      - platform: state
        entity_id: binary_sensor.phonecall
        to: 'off'
    condition:
      - condition: state
        entity_id: input_boolean.was_playing
        state: 'on'
    action:
      - service: media_player.media_play
        data:
          entity_id: media_player.salon 
      - service: input_boolean.turn_off
        data:
          entity_id: input_boolean.was_playing
