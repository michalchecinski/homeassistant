  notify_temperature_dead:
    alias: "Send notification when outside temperature sensor isn't sending data after 30 minutes"
    sequence:
      - delay:
          minutes: 46
      - service: script.ifttt_notify
        data_template:
          message: "Outside temperature battery dead"
  
  ifttt_notify:
    sequence:
      - service: ifttt.trigger
        data_template: {"event":"hass_notify", "value1":"{{ message }}", "value2":"{{ info }}"}

  notify_thinkpad:
    sequence:
      - service: mqtt.publish
        data_template:
          payload: "{{ message }}"
          topic: THINKPAD/toast
          retain: true

  notify_thinkpad_tts:
    sequence:
      - service: mqtt.publish
        data_template:
          payload: "{{ message }}"
          topic: THINKPAD/tts
          retain: true

  away_home:
    alias: "Leaving home"
    sequence:
      - service: switch.turn_off
        data:
          entity_id: 
            - switch.b3
            - light.rtv_led
            - light.bed_lamp
            - switch.stereo_switch

  wake_up:
    alias: "Script waking up"
    sequence:
      - service: light.turn_on
        data:
          entity_id: light.bed_lamp
      - service: rest_command.play_wakeup_playlist
      - delay: '00:00:10'
      - service: homeassistant.turn_off
        data:
          entity_id: binary_sensor.sleep_alarm
      - delay: '00:05:00'
      - service: light.turn_off
        data:
          entity_id: light.bed_lamp

  say:
    alias: Google Home TTS
    sequence:
      - service: media_player.volume_set
        data_template:
          entity_id:  media_player.living_room_speaker
          volume_level: "{{ volume }}"
      - service: tts.google_say
        data_template:
          entity_id:  media_player.living_room_speaker
          message: "{{ what }}"

  romantic_on:
    alias: Romantic on
    sequence:
      - service: media_player.volume_set
        data:
          entity_id: media_player.living_room_speaker
          volume_level: 0.2
      - service: media_player.volume_set
        data:
          entity_id: media_player.spotify
          volume_level: 0.2
      - service: media_player.shuffle_set
        data:
          entity_id: media_player.spotify
          shuffle: true
      - service: script.spotify_play_playlist
        data_template:
          playlist: "spotify:user:checin:playlist:6f4TfHpSuNFBaJnWxfqE2w"
      - service: light.turn_on
        data:
          entity_id: light.rtv_led

  romantic_off:
    alias: Romantic off
    sequence:
      - service: light.turn_off
        data:
          entity_id: light.rtv_led
      - service: switch.turn_off
        data:
          entity_id: switch.stereo_switch
      - service: media_player.media_pause
        data:
          entity_id: media_player.spotify
      - service: media_player.clear_playlist
        data:
          entity_id: media_player.spotify

  romantic_dance_on:
    alias: Romantic dance on
    sequence:
      - service: media_player.volume_set
        data:
          entity_id: media_player.living_room_speaker
          volume_level: 0.2
      - service: media_player.volume_set
        data:
          entity_id: media_player.spotify
          volume_level: 0.1
      - service: script.spotify_play_song
        data_template:
          song: "spotify:track:0Tel1fmuCxEFV6wBLXsEdk"
      # - service: light.turn_on
      #   data:
      #     entity_id: light.rtv_led

  spotify_play_playlist:
    alias: Spotify play playlist
    sequence:
      - service: switch.turn_on
        data:
          entity_id: switch.stereo_switch
      - service: media_player.select_source
        data:
          entity_id: media_player.spotify
          source: stereo
      - service: media_player.play_media
        data_template:
          entity_id: media_player.spotify
          media_content_type: playlist
          media_content_id: "{{ playlist }}"

  spotify_play_song:
    alias: Spotify play song
    sequence:
      - service: switch.turn_on
        data:
          entity_id: switch.stereo_switch
      - service: media_player.select_source
        data:
          entity_id: media_player.spotify
          source: stereo
      - service: media_player.play_media
        data_template:
          entity_id: media_player.spotify
          media_content_type: music
          media_content_id: "{{ song }}"

  rtv_led_off:
    alias: "rtv led off"
    sequence:
      - condition: state
        entity_id: switch.led
        state: 'on'
      - service: switch.turn_off
        entity_id: switch.led

  rtv_led_on:
    alias: "rtv led on"
    sequence:
      - condition: state
        entity_id: switch.led
        state: 'off'
      - service: switch.turn_on
        entity_id: switch.led

  iron_turn_off:
    alias: "Turn off iron after 20 minutes of use"
    sequence:
      - delay:
          minutes: 20
      - service: switch.turn_off
        data:
          entity_id: switch.b3
      - service: script.turn_on
        entity_id: script.say
        data:
          variables:
            volume: '0.8'
            what: 'Żelazko wyłączone'

  stereo_on:
    alias: "Stereo on"
    sequence:
      - condition: state
        entity_id: switch.stereo_mqtt
        state: 'off'
      - service: switch.turn_on
        data:
          entity_id: switch.stereo_mqtt

  stereo_off:
    alias: "Stereo off"
    sequence:
      - condition: state
        entity_id: switch.stereo_mqtt
        state: 'on'
      - service: switch.turn_off
        data:
          entity_id: switch.stereo_mqtt
