- platform: template
  sensors:
    event_hour_offset:
      friendly_name: "Event hour offset"
      value_template: >
        {% if (as_timestamp(states.calendar.zajecia.attributes.start_time) - as_timestamp( strptime(states.sensor.date__time.state, "%Y-%m-%d, %H:%M" ) ) <= 3600 and (as_timestamp(states.calendar.zajecia.attributes.end_time) - as_timestamp(states.calendar.zajecia.attributes.start_time) >= 3600 ) or
              (as_timestamp(states.calendar.michalchecinski1gmailcom.attributes.start_time) - as_timestamp( strptime(states.sensor.date__time.state, "%Y-%m-%d, %H:%M" ) ) <= 3600 and (as_timestamp(states.calendar.michalchecinski1gmailcom.attributes.end_time) - as_timestamp(states.calendar.michalchecinski1gmailcom.attributes.start_time) >= 3600 ) or
              (as_timestamp(states.calendar. calendar.grupa_net_spotkania.attributes.start_time) - as_timestamp( strptime(states.sensor.date__time.state, "%Y-%m-%d, %H:%M" ) ) <= 3600 and (as_timestamp(states.calendar.grupa_net_spotkania.attributes.end_time) - as_timestamp(states.calendar.grupa_net_spotkania.attributes.start_time) >= 3600 ) or
              (as_timestamp(states.calendar. calendar.egzaminy.attributes.start_time) - as_timestamp( strptime(states.sensor.date__time.state, "%Y-%m-%d, %H:%M" ) ) <= 3600 and (as_timestamp(states.calendar.egzaminy.attributes.end_time) - as_timestamp(states.calendar.egzaminy.attributes.start_time) >= 3600 ) or
              (as_timestamp(states.calendar. calendar.msp.attributes.start_time) - as_timestamp( strptime(states.sensor.date__time.state, "%Y-%m-%d, %H:%M" ) ) <= 3600 and (as_timestamp(states.calendar.msp.attributes.end_time) - as_timestamp(states.calendar.msp.attributes.start_time) >= 3600 )
        %}on{% else %}off{% endif %}
    
    event_hour:
      friendly_name: "Event hour"
      value_template: >
        {% if (as_timestamp(states.calendar.zajecia.attributes.end_time) - as_timestamp(states.calendar.zajecia.attributes.start_time) >= 3600 ) or
              (as_timestamp(states.calendar.michalchecinski1gmailcom.attributes.end_time) - as_timestamp(states.calendar.michalchecinski1gmailcom.attributes.start_time) >= 3600 ) or
              (as_timestamp(states.calendar.grupa_net_spotkania.attributes.end_time) - as_timestamp(states.calendar.grupa_net_spotkania.attributes.start_time) >= 3600 ) or
              (as_timestamp(states.calendar.egzaminy.attributes.end_time) - as_timestamp(states.calendar.egzaminy.attributes.start_time) >= 3600 ) or
              (as_timestamp(states.calendar.msp.attributes.end_time) - as_timestamp(states.calendar.msp.attributes.start_time) >= 3600 )
        %}on{% else %}off{% endif %}